/*
 * Copyright (c) 2021 Yonatan Schachter
 *
 * SPDX-License-Identifier: Apache-2.0
 */

/dts-v1/;

#include "pl02_rp2040-common.dtsi"

/ {
    leds {
        compatible = "gpio-leds";
        led0: led_0 {
            gpios = <&gpio0 16 GPIO_ACTIVE_HIGH>;
        };

        led1: led_1 {
            gpios = <&gpio0 17 GPIO_ACTIVE_HIGH>;
        };

        led2: led_2 {
            gpios = <&gpio0 18 GPIO_ACTIVE_HIGH>;
        };

        led3: led_3 {
            gpios = <&gpio0 19 GPIO_ACTIVE_HIGH>;
        };
    };

    errors_gpio {
        compatible = "gpio-keys";
   		load_overcurrent: load_overcurrent {
   			gpios = <&gpio0 12 GPIO_ACTIVE_LOW>;
   		};

   		batt_overcurrent: batt_overcurrent {
   			gpios = <&gpio0 13 GPIO_ACTIVE_LOW>;
   		};

   		batt_overvoltage: batt_overvoltage {
   			gpios = <&gpio0 14 GPIO_ACTIVE_LOW>;
   		};

   		batt_overtemp: batt_overtemp{
   			gpios = <&gpio0 15 GPIO_ACTIVE_LOW>;
   		};
    };

    pwmdevs {
        compatible = "pwm-leds";
        pwm_buck: pwm_buck_0 {
            pwms = <&pwm 4 PWM_MSEC(20) PWM_POLARITY_NORMAL>;
        };
    };


    aliases {
        pwm-buck= &pwm_buck;
        load-overcurrent-led = &led0;
        batt-overcurrent-led = &led1;
        batt-overvoltage-led = &led2;
        batt-overtemp-led = &led3;
    };
};

&pwm {
    status = "okay";
};
